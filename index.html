<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combate com IA</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="playerAttackMessage" class="player-attack-message hidden"></div>
    <div class="game-container">
        <div id="inicio">
            <img src="Imgs/Logo.png" alt="Logo" style="display:block;margin:90px auto 0 auto;max-width:60vw;max-height:60vh;">
            <button id="iniciarBtn" class="nav-btn" style="position:fixed;bottom:48px;left:50%;transform:translateX(-50%);">Iniciar Missão</button>
        </div>

        <div id="escolha" class="hidden">
            <h2>Escolha seu personagem</h2>
            <div class="character-selection">
                <div class="character-option">
                    <button class="nav-btn" onclick="window.gameInstance.escolher('Sniper', 'Imgs/Player/Sniper.png')">
                        Selecionar
                    </button>
                    <div class="character-nome">Sniper</div>
                    <div class="character-habilidade">D20 +3 bônus. Acerta com 11+.</div>
                    <img class="character-img" src="Imgs/Player/Sniper.png" alt="Sniper">
                </div>
                <div class="character-option">
                    <button class="nav-btn" onclick="window.gameInstance.escolher('Hacker', 'Imgs/Player/Hacker.png')">
                        Selecionar
                    </button>
                    <div class="character-nome">Hacker</div>
                    <div class="character-habilidade">D20 + D4. Acerta com 11+.</div>
                    <img class="character-img" src="Imgs/Player/Hacker.png" alt="Hacker">
                </div>
                <div class="character-option">
                    <button class="nav-btn" onclick="window.gameInstance.escolher('Assassina', 'Imgs/Player/Assasin.png')">
                        Selecionar
                    </button>
                    <div class="character-nome">Assassina</div>
                    <div class="character-habilidade">D20. Acerta com 13+. Ignora 1º dano.</div>
                    <img class="character-img" src="Imgs/Player/Assasin.png" alt="Assassina">
                </div>
            </div>
        </div>

        <div id="combate" class="hidden">
            <div class="turno-info">
                Turno <span id="numeroTurno">1</span>
            </div>

            <div class="combat-layout">
                <!-- Status do Jogador -->
                <div class="status-card player">
                    <div class="hud-foto">
                        <img src="Imgs/Player/Hacker.png" alt="Foto Jogador" id="fotoJogador">
                    </div>
                    <div class="hud-info">
                        <div class="hud-nome" id="nomeJogador">Hacker</div>
                        <div class="barra-vida">
                            <div id="vidaJogadorBarra" class="vida-atual" style="width: 100%"></div>
                        </div>
                        <div class="hud-valor"><span id="vidaJogador">3</span>/3</div>
                    </div>
                </div>

                <!-- Centro - IA -->
                <div class="ia-container">
                    <!-- Drone (Andar 1) -->
                    <img src="Imgs/Enemy/1-Drone/Drone_GameBattleImg.png" class="ia-image andar-1" id="droneNormal" alt="Drone">
                    <img src="Imgs/Enemy/1-Drone/Drone_GameBattleImg.png" class="ia-damage andar-1" id="droneDano" alt="Drone Dano">
                    
                    <!-- K9 (Andar 2) -->
                    <img src="Imgs/Enemy/2-K9/K9_GameBattleImg.png" class="ia-image andar-2 hidden" id="k9Normal" alt="K9">
                    <img src="Imgs/Enemy/2-K9/K9_GameBattleImg.png" class="ia-damage andar-2 hidden" id="k9Dano" alt="K9 Dano">
                    
                    <!-- IA (Andar 3) -->
                    <img src="Imgs/Enemy/3-AI/Base_EvilAI.gif" class="ia-image andar-3 hidden" id="iaNormal" alt="IA">
                    <img src="Imgs/Enemy/3-AI/Demage_EvilAI.gif" class="ia-damage andar-3 hidden" id="iaDano" alt="IA Dano">
                    
                    <div id="diceAnimation" class="dice-animation hidden"></div>
                </div>

                <!-- Status da IA -->
                <div class="status-card ia">
                    <div class="hud-info">
                        <div class="hud-nome" id="nomeIA">IA Maligna</div>
                        <div class="barra-vida">
                            <div id="vidaIABarra" class="vida-atual" style="width: 100%"></div>
                        </div>
                        <div class="hud-valor"><span id="vidaIA">3</span>/3</div>
                        <div class="hud-difficulty"><span id="enemyDifficulty">11+</span> PARA ACERTAR</div>
                    </div>
                </div>
            </div>

            <!-- Player Section -->
            <div class="player-section">
                <!-- Imagem do Personagem -->
                <img id="playerCharacter" class="player-character" src="" alt="Personagem">
                
                <!-- Status do Jogador (lado esquerdo) -->
                <div class="player-status-left">
                    <div class="status-text">
                        <div class="status-line">VS CIBERNÉTICOS: <span id="playerVsCyber">+0</span></div>
                        <div class="status-line">VS BLINDADOS: <span id="playerVsArmored">+0</span></div>
                        <div class="status-line">VS ORGÂNICOS: <span id="playerVsOrganic">+0</span></div>
                    </div>
                </div>
            </div>
            

            <!-- Controles de Combate -->
            <div class="combat-controls">
                <!-- Painel de Rolagem de Dados -->
                <div class="dice-panel">
                    <div id="playerDiceAnimation" class="dice-container">
                        <span class="dice-label">D20</span>
                    </div>
                    <div id="playerDiceAnimationHacker" class="dice-container hacker-only" style="display: none;">
                        <span class="dice-label">D4</span>
                    </div>
                </div>
                
                <!-- Botões de Ação -->
                <div class="action-buttons">
                    <button id="attackBtn" class="attack-btn">ATTACK</button>
                    <div class="hacker-controls hacker-only" style="display: none;">
                        <div class="hack-button-container">
                            <button id="hackBtn" class="hack-btn">HACK</button>
                            <div id="hackBonus" class="hack-bonus-indicator hidden">+0</div>
                        </div>
                        <div class="hack-uses-indicator">
                            <div class="hack-use-dot" id="hackUse1"></div>
                            <div class="hack-use-dot" id="hackUse2"></div>
                            <div class="hack-use-dot" id="hackUse3"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mensagens de Resultado -->
            <div id="resultadoJogador" class="resultado-ataque hidden"></div>
            <div id="resultadoIA" class="resultado-ataque hidden"></div>
        </div>

        <!-- Botão de Inventário (apenas nas batalhas) -->
        <button id="inventoryBtn" class="inventory-btn">
            <img src="Imgs/Elements/Inventory_Icon.png" alt="Inventário" class="inventory-icon-img">
        </button>

        <div id="transicao" class="hidden">
            <h2 id="mensagemTransicao"></h2>
            <button id="proximoAndarBtn" class="nav-btn">Seguir para Próximo Andar</button>
        </div>

        <!-- Modal do Inventário -->
        <div id="inventoryModal" class="inventory-modal hidden">
            <div class="inventory-overlay"></div>
            <div class="inventory-content">
                <div class="inventory-header">
                    <h2>Inventário</h2>
                    <button id="closeInventoryBtn" class="close-inventory-btn">×</button>
                </div>
                
                <div class="inventory-body">
                    <!-- Inventário - Duas linhas -->
                    <div class="inventory-section">
                        <h3>Inventário</h3>
                        <div class="inventory-grid" id="inventoryGrid">
                            <!-- Itens serão inseridos aqui dinamicamente -->
                        </div>
                    </div>
                    
                    <!-- Equipamentos - Terceira linha -->
                    <div class="equipment-section">
                        <h3>Equipamentos</h3>
                        <div class="equipment-slots">
                            <div class="equipment-slot" data-slot="head">
                                <div class="slot-label">Cabeça</div>
                                <div class="slot-content" id="headSlot"></div>
                            </div>
                            <div class="equipment-slot" data-slot="leftHand">
                                <div class="slot-label">Mão Esquerda</div>
                                <div class="slot-content" id="leftHandSlot"></div>
                            </div>
                            <div class="equipment-slot" data-slot="rightHand">
                                <div class="slot-label">Mão Direita</div>
                                <div class="slot-content" id="rightHandSlot"></div>
                            </div>
                            <div class="equipment-slot" data-slot="torso">
                                <div class="slot-label">Tronco</div>
                                <div class="slot-content" id="torsoSlot"></div>
                            </div>
                            <div class="equipment-slot" data-slot="legs">
                                <div class="slot-label">Pernas</div>
                                <div class="slot-content" id="legsSlot"></div>
                            </div>
                            <div class="equipment-slot" data-slot="modifications">
                                <div class="slot-label">Modificações</div>
                                <div class="slot-content" id="modificationsSlot"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="resultado" class="hidden">
            <h2 id="resultadoFinal"></h2>
            <p id="recompensa" class="hidden"></p>
            <button id="reiniciarBtn" class="reiniciar-btn nav-btn">Voltar ao Início</button>
        </div>
    </div>

    <!-- Modal de Hacking -->
    <div id="hackingModal" class="hacking-modal hidden">
        <div class="hacking-overlay"></div>
        <div class="hacking-content">
            <!-- Header do Modal -->
            <div class="hacking-header">
                <h2>BREACH PROTOCOL</h2>
                <button id="closeHackingBtn" class="close-hacking-btn">&times;</button>
            </div>
            
            <!-- Topbar com Timer e Buffer -->
            <div class="bp-topbar">
                <div class="bp-timer-block">
                    <div class="bp-timer-label">TIME REMAINING</div>
                    <div class="bp-timer-bar">
                        <div class="bp-timer-bar-inner"></div>
                    </div>
                    <div class="bp-timer-value" id="hackTimerValue">30.00</div>
                </div>
                <div class="bp-buffer-block">
                    <div class="bp-buffer-label">BUFFER</div>
                    <div class="bp-buffer-boxes" id="hackBufferBoxes"></div>
                </div>
            </div>

            <!-- Área Principal -->
            <div class="bp-mainarea">
                <!-- Painel da Matrix -->
                <div class="bp-matrix-panel">
                    <div class="panel-header">CODE MATRIX</div>
                    <div class="bp-matrix-area">
                        <table id="hackGrid" class="matrix"></table>
                    </div>
                </div>

                <!-- Painel de Sequências -->
                <div class="bp-hacks-panel">
                    <div class="bp-hacks-label">SEQUENCE REQUIRED TO UPLOAD</div>
                    <div class="bp-hack-list" id="hackList">
                        <!-- Sequências serão geradas pelo JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Mensagens de Resultado -->
            <div id="hackWinMsg" class="hack-result-msg hidden">ACCESS GRANTED</div>
            <div id="hackFailMsg" class="hack-result-msg hidden">ACCESS DENIED</div>
        </div>
    </div>

    <script src="js/systems/itemSystem.js"></script>
    <script src="js/systems/inventorySystem.js"></script>
    <script src="js/ui/inventoryUI.js"></script>
    <script src="js/game.js"></script>
</body>
</html> 